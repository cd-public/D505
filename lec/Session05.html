<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-a4a11d514c7d463668e07712114998e6.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.30">

  <meta name="author" content="Jameson > Calvin">
  <title>Logistic Regression</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-ffcbf325be4bf09b74891d05b29692c2.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Logistic Regression</h1>
  <p class="subtitle">Applied Machine Learning</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jameson &gt; Calvin 
</div>
</div>
</div>

</section>
<section id="agenda" class="slide level2">
<h2>Agenda</h2>
</section>
<section id="agenda-1" class="slide level2">
<h2>Agenda</h2>
<ol start="0" type="1">
<li>Course Announcements</li>
<li>Mathematics of logistic regression</li>
<li>Implementation with Caret</li>
<li>ROC Curves</li>
<li>Group work</li>
</ol>
</section>
<section>
<section id="midterm-317" class="title-slide slide level1 center">
<h1>Midterm 3/17</h1>

</section>
<section id="brief-recap-of-course-so-far" class="slide level2 smaller">
<h2>Brief recap of course so far</h2>
<ul>
<li>Linear regression (e.g.&nbsp;<code>lprice ~ .</code>), assumptions of model, interpretation.</li>
<li><span class="math inline">\(K\)</span>-NN (e.g., <code>province ~ .</code>), multi-class supervised classification. Hyperparameter <span class="math inline">\(k\)</span>.</li>
<li>Naive Bayes (e.g., <code>province ~ .</code>), multi-class supervised classification.</li>
<li>Logistic regression (e.g., <code>province=="Oregon" ~ .</code>), binary supervised classification. Elastic net.</li>
<li>Feature engineering (logarithms, center/scaling, Box Cox, tidytext, etc.).</li>
<li>Feature selection (correlation, linear / logistic coefficients, frequent words, frequent words by class, etc.).</li>
</ul>
</section>
<section id="practice" class="slide level2">
<h2>Practice</h2>
<ul>
<li>I am working to develop a practice midterm.</li>
<li>I will circulate it by 3 Mar.</li>
<li>You will go over it on 10 Mar.</li>
<li>It is based on the 5 homeworks.</li>
<li>It is based on the prior slide.
<ul>
<li>Little to no computatational linguistics</li>
<li>I’m regarding <code>tidytext</code> as extension, not core, content.</li>
</ul></li>
</ul>
</section>
<section id="modality-discussion" class="slide level2">
<h2>Modality Discussion</h2>
<ul>
<li>I would release an assignment electronically at 6 PM</li>
<li>We can do in person or otherwise.</li>
<li>It will be “cheat proof”
<ul>
<li>I will ask you nothing for which it matters how you determine the answer.</li>
<li>If e.g.&nbsp;ChatGPT can be mind controlled into doing high quality feature engineering, you get points for mind controlling ChatGPT.</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="first-model-due-310" class="title-slide slide level1 center">
<h1>First Model Due 3/10</h1>

</section>
<section id="publish" class="slide level2">
<h2>Publish</h2>
<p>Each group should create: 1. An annotated <code>.*md</code> file, and 2. The .rds/.pickle/.parquet file that it generates, that 3. Contains <em>only</em> the features you want in the model.</p>
<p>Under version control, on GitHub.</p>
</section>
<section id="constraints" class="slide level2">
<h2>Constraints</h2>
<p>I will run:</p>
<ol type="1">
<li>The specified <span class="math inline">\(K\)</span>NN or Naive Bayes model,</li>
<li>With: <code>province ~ .</code> (or the whole data frame in <code>scikit</code>)</li>
<li>With repeated 5-fold cross validation</li>
<li>With the same index for partitioning training and test sets for every group.</li>
<li>On whatever is turned in before class.</li>
<li>Bragging rights for highest Kappa</li>
</ol>
</section>
<section id="context" class="slide level2">
<h2>Context</h2>
<ul>
<li>The “final exam” is that during the last class you will present your model results as though you are speaking to the managers of a large winery.</li>
<li>It should be presented from a Quarto presentation on GitHub or perhaps e.g.&nbsp;RPubs.</li>
<li>You must present via the in-room “teaching machine” computer, not your own physical device, to ensure that you are comfortable distributing your findings.</li>
</ul>
</section>
<section id="group-meetings" class="slide level2">
<h2>Group Meetings</h2>
<ul>
<li>You should have a group assignment</li>
<li>Meet in your groups!</li>
<li>Talk about your homework <em>with</em> your group.</li>
</ul>
</section></section>
<section>
<section id="logistic-regression" class="title-slide slide level1 center">
<h1>Logistic Regression</h1>

</section>
<section id="algorithm" class="slide level2">
<h2>Algorithm</h2>
<ul>
<li>Assume a linear relationship between the log odds and a set of predictor variables.</li>
</ul>
<p><span class="math display">\[
log(\frac{p}{1-p})=\beta_{0}+\beta_{1}x_{1}+\beta_{2}x_{2}
\]</span></p>
<p>With a bit of algebra you can get the probabilities as…</p>
<p><span class="math display">\[
p=\frac{1}{1+e^{-(\beta_{0}+\beta_{1}x_{1}+\beta_{2}x_{2})}}
\]</span></p>
</section>
<section id="section" class="slide level2">
<h2></h2>
<p><span class="math display">\[
log(\frac{p}{1-p})=\beta_{0}+\beta_{1}x_{1}+\beta_{2}x_{2}
\]</span></p>
<p>‘p’ represents the probability of the event occurring.</p>
<ul>
<li>Represented as natural log <code>ln</code>…</li>
<li>of the odds ratio (<span class="math inline">\(\frac{p}{1-p}\)</span>)…</li>
<li>as a linear combination of
<ul>
<li>predictor variables (<span class="math inline">\(x_1\)</span>, <span class="math inline">\(x_2\)</span>) and</li>
<li>their corresponding coefficients (<span class="math inline">\(\beta_1\)</span>, <span class="math inline">\(\beta_2\)</span>)</li>
<li>plus an intercept (<span class="math inline">\(\beta_0\)</span>).</li>
</ul></li>
</ul>
</section>
<section id="understanding-check" class="slide level2">
<h2>Understanding check?</h2>
<ul>
<li>Why do we call this regression instead of classification?</li>
<li>Quick Algebra review
<ul>
<li>Look, it’s better to be comfortable with algebra than not.</li>
</ul></li>
</ul>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<p><a title="Canley, CC BY-SA 4.0 <https://creativecommons.org/licenses/by-sa/4.0>, via Wikimedia Commons" href="https://commons.wikimedia.org/wiki/File:Exam_pass_logistic_curve.svg"><img width="100%" alt="Logistic regression curve showing probability of passing an exam versus hours studying" src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Exam_pass_logistic_curve.svg/512px-Exam_pass_logistic_curve.svg.png?20220327133556"></a></p>
</section>
<section id="log-odds" class="slide level2">
<h2>Log Odds</h2>
<ul>
<li><strong>1. Start with the log-odds equation:</strong></li>
</ul>
<p><span class="math display">\[
log(\frac{p}{1-p}) = \beta_0 + \beta_1x_1 + \beta_2x_2
\]</span></p>
</section>
<section id="exponentiate" class="slide level2">
<h2>Exponentiate</h2>
<ul>
<li><p><strong>2. Exponentiate both sides:</strong></p></li>
<li><p>To remove the logarithm, we take the exponential (e) of both sides of the equation:</p></li>
</ul>
<p><span class="math display">\[
e^{log(\frac{p}{1-p})} = e^{\beta_0 + \beta_1x_1 + \beta_2x_2}
\]</span></p>
</section>
<section id="simplify" class="slide level2">
<h2>Simplify</h2>
<ul>
<li><p><strong>3. Simplify the left side:</strong></p></li>
<li><p>The exponential function and the natural logarithm are inverse functions of each other.<br>
</p></li>
<li><p>Therefore, <span class="math inline">\(e^{log(x)} = x\)</span>. This simplifies the left side:</p></li>
</ul>
<p><span class="math display">\[
\frac{p}{1-p} = e^{\beta_0 + \beta_1x_1 + \beta_2x_2}
\]</span></p>
</section>
<section id="rewrite" class="slide level2">
<h2>Rewrite</h2>
<ul>
<li><p><strong>4. Rewrite the right side using exponent rules:</strong></p></li>
<li><p>We can rewrite the right side using the rule <span class="math inline">\(e^{a+b} = e^a * e^b\)</span>:</p></li>
</ul>
<p><span class="math display">\[
\frac{p}{1-p} = e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2}
\]</span></p>
</section>
<section id="find-p-1" class="slide level2">
<h2>Find <span class="math inline">\(p\)</span> 1</h2>
<ul>
<li><ol start="5" type="1">
<li>Find <span class="math inline">\(p\)</span></li>
</ol>
<ul>
<li><strong>Multiply both sides by (1-p):</strong></li>
</ul></li>
</ul>
<p><span class="math display">\[
p = (1-p) * e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2}
\]</span></p>
</section>
<section id="find-p-2" class="slide level2">
<h2>Find <span class="math inline">\(p\)</span> 2</h2>
<ul>
<li><ol start="5" type="1">
<li>Find <span class="math inline">\(p\)</span></li>
</ol>
<ul>
<li><strong>Distribute the right-hand side (RHS):</strong></li>
</ul></li>
</ul>
<p><span class="math display">\[
p = e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2} - p * e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2}
\]</span></p>
</section>
<section id="find-p-2-1" class="slide level2">
<h2>Find <span class="math inline">\(p\)</span> 2</h2>
<ul>
<li><ol start="5" type="1">
<li>Find <span class="math inline">\(p\)</span></li>
</ol>
<ul>
<li><strong>Move the <span class="math inline">\(p\)</span> term to the left side:</strong></li>
</ul></li>
</ul>
<p><span class="math display">\[
p + p * e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2} = e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2}
\]</span></p>
</section>
<section id="find-p-3" class="slide level2">
<h2>Find <span class="math inline">\(p\)</span> 3</h2>
<ul>
<li><ol start="5" type="1">
<li>Find <span class="math inline">\(p\)</span></li>
</ol>
<ul>
<li><strong>Factor out <span class="math inline">\(p\)</span> on the left side:</strong></li>
</ul></li>
</ul>
<p><span class="math display">\[
p * (1 + e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2}) = e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2}
\]</span></p>
</section>
<section id="find-p-4" class="slide level2">
<h2>Find <span class="math inline">\(p\)</span> 4</h2>
<ul>
<li><ol start="5" type="1">
<li>Find <span class="math inline">\(p\)</span></li>
</ol>
<ul>
<li><strong>Divide both sides by the term in parentheses:</strong> <span class="math display">\[
p = \frac{e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2}}{1 + e^{\beta_0} * e^{\beta_1x_1} * e^{\beta_2x_2}}
\]</span></li>
</ul></li>
</ul>
</section>
<section id="simplify-1" class="slide level2">
<h2>Simplify</h2>
<ul>
<li><p><strong>6. Simplify the expression:</strong></p></li>
<li><p>We can further simplify by multiplying the numerator and denominator by <span class="math inline">\(e^{-(\beta_0 + \beta_1x_1 + \beta_2x_2)}\)</span>:</p></li>
</ul>
<p><span class="math display">\[
p = \frac{1}{e^{-(\beta_0 + \beta_1x_1 + \beta_2x_2)} + 1}
\]</span></p>
</section>
<section id="rewrite-1" class="slide level2">
<h2>Rewrite</h2>
<ul>
<li>Which is commonly written as:</li>
</ul>
<p><span class="math display">\[
p = \frac{1}{1 + e^{-(\beta_0 + \beta_1x_1 + \beta_2x_2)}}
\]</span></p>
</section></section>
<section>
<section id="implementation-with-caret" class="title-slide slide level1 center">
<h1>Implementation with Caret</h1>

</section>
<section id="libraries-setup" class="slide level2">
<h2>Libraries Setup</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a>sh <span class="ot">&lt;-</span> suppressPackageStartupMessages</span>
<span id="cb1-2"><a></a><span class="fu">sh</span>(<span class="fu">library</span>(tidyverse))</span>
<span id="cb1-3"><a></a><span class="fu">sh</span>(<span class="fu">library</span>(caret))</span>
<span id="cb1-4"><a></a><span class="fu">sh</span>(<span class="fu">library</span>(tidytext))</span>
<span id="cb1-5"><a></a><span class="fu">sh</span>(<span class="fu">library</span>(SnowballC)) <span class="co"># new?</span></span>
<span id="cb1-6"><a></a><span class="fu">sh</span>(<span class="fu">library</span>(pROC))      <span class="co"># new?</span></span>
<span id="cb1-7"><a></a><span class="fu">sh</span>(<span class="fu">library</span>(glmnet))</span>
<span id="cb1-8"><a></a><span class="fu">data</span>(stop_words)</span>
<span id="cb1-9"><a></a><span class="fu">sh</span>(<span class="fu">library</span>(thematic))</span>
<span id="cb1-10"><a></a><span class="fu">theme_set</span>(<span class="fu">theme_dark</span>())</span>
<span id="cb1-11"><a></a><span class="fu">thematic_rmd</span>(<span class="at">bg =</span> <span class="st">"#111"</span>, <span class="at">fg =</span> <span class="st">"#eee"</span>, <span class="at">accent =</span> <span class="st">"#eee"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dataframe" class="slide level2">
<h2>Dataframe</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>wine <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">gzcon</span>(<span class="fu">url</span>(<span class="st">"https://cd-public.github.io/D505/dat/pinot.rds"</span>)))</span>
<span id="cb2-2"><a></a><span class="fu">names</span>(wine)[<span class="fu">names</span>(wine) <span class="sc">==</span> <span class="st">'id'</span>] <span class="ot">=</span> <span class="st">'id'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="extract-certain-words" class="slide level2">
<h2>Extract certain words</h2>
<ul>
<li>We’ll proceed in a few steps.
<ul>
<li>First, a function to extract all words.
<ul>
<li>We’ll omit stopwords
<ul>
<li>Remember those? Like “of” and “a”</li>
</ul></li>
<li>We’ll omit a few words-of-choice
<ul>
<li>Like “pinot”</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="extract-all-words" class="slide level2">
<h2>Extract all words</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>desc_to_words <span class="ot">&lt;-</span> <span class="cf">function</span>(df, omits) { </span>
<span id="cb3-2"><a></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a></a>    <span class="fu">unnest_tokens</span>(word, description) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a></a>    <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> <span class="co"># get rid of stop words</span></span>
<span id="cb3-5"><a></a>    <span class="fu">filter</span>(<span class="sc">!</span>(word <span class="sc">%in%</span> omits))</span>
<span id="cb3-6"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="extract-all-words-1" class="slide level2">
<h2>Extract all words</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>words <span class="ot">&lt;-</span> <span class="fu">desc_to_words</span>(wine, <span class="fu">c</span>(<span class="st">"wine"</span>,<span class="st">"pinot"</span>,<span class="st">"vineyard"</span>))</span>
<span id="cb4-2"><a></a><span class="co"># The second argument is our custom stopwards, as a vector</span></span>
<span id="cb4-3"><a></a><span class="fu">head</span>(words)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id province price points year     word
1  1   Oregon    65     87 2012  regular
2  1   Oregon    65     87 2012 bottling
3  1   Oregon    65     87 2012     2012
4  1   Oregon    65     87 2012    rough
5  1   Oregon    65     87 2012   tannic
6  1   Oregon    65     87 2012   rustic</code></pre>
</div>
</div>
</section>
<section id="extract-certain-words-1" class="slide level2">
<h2>Extract certain words</h2>
<ul>
<li>We’ll proceed in a few steps.
<ul>
<li>Optionally, look at stems
<ul>
<li>This is really cool.</li>
<li>Do I care about the difference between “acidic” and “acidity”?
<ul>
<li>The linguistics consensus leans toward no.</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="stem" class="slide level2">
<h2>STEM</h2>
<ul>
<li>Short for data <em>S</em>cience, da<em>T</em>a science, data scienc<em>E</em>, and <em>M</em>achine learning.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>words_to_stems <span class="ot">&lt;-</span> <span class="cf">function</span>(df) { </span>
<span id="cb6-2"><a></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a></a>    <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">wordStem</span>(word))</span>
<span id="cb6-4"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>We want to use a <code>tidytext</code> built-in here, of course.
<ul>
<li>We aren’t domain experts in linguistics…</li>
<li>But we are domain experts in using R libraries.</li>
</ul></li>
</ul>
</section>
<section id="example" class="slide level2">
<h2>Example</h2>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Word_stem#Root_vs_stem">Stem may either consist of a root (e.g.&nbsp;run) alone or a compound word, such as meatball and bottleneck (examples of compound nouns) or blacken and standardize (examples of compound verbs). The stem of the verb to wait is wait: it is the part that is common to all its inflected variants.</a></p>
</blockquote>
</section>
<section id="wait" class="slide level2">
<h2>Wait</h2>
<ul>
<li>‘wait’ (infinitive, imperative, present subjunctive, and present indicative except in the 3rd-person singular)</li>
<li>‘waits’ (3rd person singular simple present indicative)</li>
<li>‘waited’ (simple past)</li>
<li>‘waited’ (past participle)</li>
<li>‘waiting’ (present participle)</li>
</ul>
</section>
<section id="stem-1" class="slide level2">
<h2>STEM</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>stems <span class="ot">&lt;-</span> <span class="fu">words_to_stems</span>(words)</span>
<span id="cb7-2"><a></a><span class="fu">head</span>(stems)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  id province price points year    word
1  1   Oregon    65     87 2012 regular
2  1   Oregon    65     87 2012   bottl
3  1   Oregon    65     87 2012    2012
4  1   Oregon    65     87 2012   rough
5  1   Oregon    65     87 2012  tannic
6  1   Oregon    65     87 2012  rustic</code></pre>
</div>
</div>
</section>
<section id="bottl" class="slide level2">
<h2>Bottl</h2>
<ul>
<li>Another example.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>g6_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">description =</span> <span class="st">"Popping bottles in the ice; like a blizzard."</span>)</span>
<span id="cb9-2"><a></a><span class="fu">words_to_stems</span>(<span class="fu">desc_to_words</span>(g6_df, <span class="fu">c</span>(<span class="st">"ice"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
  word    
  &lt;chr&gt;   
1 pop     
2 bottl   
3 blizzard</code></pre>
</div>
</div>
</section>
<section id="like-a-g6" class="slide level2">
<h2>Like a G6</h2>
<iframe width="100%" height="100%" src="https://www.youtube.com/embed/w4s6H4ku6ZY?si=DWmx3skbebkcm1Dk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
</section>
<section id="word-count" class="slide level2">
<h2>Word Count</h2>
<ul>
<li>With either or words or our stems, we can see how many of each word we have easily enough.
<ul>
<li>And eliminate words will less than a certain count!</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>filter_by_count <span class="ot">&lt;-</span> <span class="cf">function</span>(df, j) { </span>
<span id="cb11-2"><a></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a></a>    <span class="fu">count</span>(id, word) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a></a>    <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">exists =</span> (n<span class="sc">&gt;</span><span class="dv">0</span>)) <span class="sc">%&gt;%</span> ungroup <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a></a>    <span class="fu">group_by</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a></a>    <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-7"><a></a>    <span class="fu">filter</span>(total <span class="sc">&gt;</span> j)</span>
<span id="cb11-8"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-it" class="slide level2">
<h2>Check it</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>fwords <span class="ot">=</span> <span class="fu">filter_by_count</span>(words, <span class="dv">1000</span>)</span>
<span id="cb12-2"><a></a><span class="fu">head</span>(fwords)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
# Groups:   word [5]
     id word          n exists total
  &lt;int&gt; &lt;chr&gt;     &lt;int&gt; &lt;lgl&gt;  &lt;int&gt;
1     2 drink         1 TRUE    1388
2     2 oak           2 TRUE    1198
3     3 aromas        1 TRUE    1459
4     3 bodied        1 TRUE    1016
5     3 oak           1 TRUE    1198
6     3 raspberry     1 TRUE    1394</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>fstems <span class="ot">=</span> <span class="fu">filter_by_count</span>(stems, <span class="dv">1000</span>)</span>
<span id="cb14-2"><a></a><span class="fu">head</span>(fstems)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
# Groups:   word [6]
     id word      n exists total
  &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;lgl&gt;  &lt;int&gt;
1     1 bottl     1 TRUE    1229
2     2 ag        1 TRUE    1101
3     2 berri     1 TRUE    1028
4     2 drink     1 TRUE    1573
5     2 oak       2 TRUE    1225
6     3 aroma     1 TRUE    1601</code></pre>
</div>
</div>
</div></div>
</section>
<section id="back-to-wine" class="slide level2">
<h2>Back to Wine</h2>
<ul>
<li>We currently have multiple entries per ID in a tidy dataframe</li>
<li>We would like to get back to have features for each ID, as each ID is some wine.</li>
<li>One way to do so, is to make columns from the word data.</li>
<li>We use <code>pivot_wider</code></li>
</ul>
</section>
<section id="pivot" class="slide level2">
<h2>Pivot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a>pivoter <span class="ot">&lt;-</span> <span class="cf">function</span>(words, df) {</span>
<span id="cb16-2"><a></a>  words <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a></a>    <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> id, <span class="at">names_from =</span> word, <span class="at">values_from =</span> exists, <span class="at">values_fill =</span> <span class="fu">list</span>(<span class="at">exists=</span><span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a></a>    <span class="fu">right_join</span>(<span class="fu">select</span>(df,id,province)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-5"><a></a>    <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a></a>    <span class="fu">select</span>(<span class="sc">-</span>id)</span>
<span id="cb16-7"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-it-1" class="slide level2">
<h2>Check it</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">head</span>(<span class="fu">pivoter</span>(fwords, wine))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 23
  drink oak   aromas bodied raspberry spice finish fruit flavors tannins
  &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt;  &lt;lgl&gt;  &lt;lgl&gt;     &lt;lgl&gt; &lt;lgl&gt;  &lt;lgl&gt; &lt;lgl&gt;   &lt;lgl&gt;  
1 TRUE  TRUE  FALSE  FALSE  FALSE     FALSE FALSE  FALSE FALSE   FALSE  
2 FALSE TRUE  TRUE   TRUE   TRUE      TRUE  FALSE  FALSE FALSE   FALSE  
3 FALSE FALSE FALSE  FALSE  FALSE     FALSE TRUE   TRUE  FALSE   FALSE  
4 FALSE FALSE FALSE  FALSE  FALSE     FALSE FALSE  FALSE TRUE    TRUE   
5 TRUE  FALSE FALSE  FALSE  FALSE     FALSE FALSE  FALSE TRUE    FALSE  
6 FALSE FALSE FALSE  FALSE  TRUE      FALSE FALSE  FALSE FALSE   FALSE  
# ℹ 13 more variables: strawberry &lt;lgl&gt;, cranberry &lt;lgl&gt;, dark &lt;lgl&gt;,
#   palate &lt;lgl&gt;, acidity &lt;lgl&gt;, black &lt;lgl&gt;, cherry &lt;lgl&gt;, nose &lt;lgl&gt;,
#   ripe &lt;lgl&gt;, light &lt;lgl&gt;, red &lt;lgl&gt;, plum &lt;lgl&gt;, province &lt;chr&gt;</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="fu">head</span>(<span class="fu">pivoter</span>(fstems, wine))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 30
  bottl ag    berri drink oak   aroma bodi  offer raspberri spice textur finish
  &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt;     &lt;lgl&gt; &lt;lgl&gt;  &lt;lgl&gt; 
1 TRUE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE     FALSE FALSE  FALSE 
2 FALSE TRUE  TRUE  TRUE  TRUE  FALSE FALSE FALSE FALSE     FALSE FALSE  FALSE 
3 FALSE FALSE FALSE FALSE TRUE  TRUE  TRUE  TRUE  TRUE      TRUE  TRUE   FALSE 
4 FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE     FALSE FALSE  TRUE  
5 FALSE FALSE TRUE  FALSE FALSE FALSE FALSE FALSE FALSE     FALSE FALSE  FALSE 
6 FALSE FALSE FALSE TRUE  FALSE FALSE FALSE FALSE FALSE     FALSE FALSE  FALSE 
# ℹ 18 more variables: flavor &lt;lgl&gt;, fruit &lt;lgl&gt;, ripe &lt;lgl&gt;, tannin &lt;lgl&gt;,
#   strawberri &lt;lgl&gt;, cranberri &lt;lgl&gt;, dark &lt;lgl&gt;, palat &lt;lgl&gt;, acid &lt;lgl&gt;,
#   black &lt;lgl&gt;, cherri &lt;lgl&gt;, nose &lt;lgl&gt;, light &lt;lgl&gt;, red &lt;lgl&gt;, rich &lt;lgl&gt;,
#   plum &lt;lgl&gt;, structur &lt;lgl&gt;, province &lt;chr&gt;</code></pre>
</div>
</div>
</div></div>
</section>
<section id="full-function" class="slide level2">
<h2>Full Function</h2>
<ul>
<li>Create a function to extract words with totals &gt; j</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a>wine_words <span class="ot">&lt;-</span> <span class="cf">function</span>(df, j, stem) { </span>
<span id="cb21-2"><a></a></span>
<span id="cb21-3"><a></a>  words <span class="ot">&lt;-</span> <span class="fu">desc_to_words</span>(df, <span class="fu">c</span>(<span class="st">"wine"</span>,<span class="st">"pinot"</span>,<span class="st">"vineyard"</span>))</span>
<span id="cb21-4"><a></a>  </span>
<span id="cb21-5"><a></a>  <span class="cf">if</span> (stem) {</span>
<span id="cb21-6"><a></a>    words <span class="ot">&lt;-</span> <span class="fu">words_to_stems</span>(words)</span>
<span id="cb21-7"><a></a>  }</span>
<span id="cb21-8"><a></a>  </span>
<span id="cb21-9"><a></a>  words <span class="ot">&lt;-</span> <span class="fu">filter_by_count</span>(words, j)</span>
<span id="cb21-10"><a></a></span>
<span id="cb21-11"><a></a>  <span class="fu">pivoter</span>(words, df)</span>
<span id="cb21-12"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="look-at-the-data" class="slide level2">
<h2>Look at the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>wino <span class="ot">&lt;-</span> <span class="fu">wine_words</span>(wine, <span class="dv">1000</span>, F)</span>
<span id="cb22-2"><a></a></span>
<span id="cb22-3"><a></a>wino <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-5"><a></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, province)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 6
   drink oak   aromas bodied raspberry province  
   &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt;  &lt;lgl&gt;  &lt;lgl&gt;     &lt;chr&gt;     
 1 TRUE  TRUE  FALSE  FALSE  FALSE     Oregon    
 2 FALSE TRUE  TRUE   TRUE   TRUE      California
 3 FALSE FALSE FALSE  FALSE  FALSE     Oregon    
 4 FALSE FALSE FALSE  FALSE  FALSE     Oregon    
 5 TRUE  FALSE FALSE  FALSE  FALSE     Oregon    
 6 FALSE FALSE FALSE  FALSE  TRUE      California
 7 FALSE FALSE FALSE  FALSE  TRUE      California
 8 FALSE TRUE  FALSE  FALSE  TRUE      California
 9 FALSE FALSE FALSE  FALSE  FALSE     Oregon    
10 FALSE FALSE TRUE   FALSE  FALSE     Oregon    </code></pre>
</div>
</div>
</section>
<section id="logistic-regression-1" class="slide level2">
<h2>Logistic Regression</h2>
<ul>
<li>We check a true/false outcome.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>wino <span class="ot">&lt;-</span> wino <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a></a>  <span class="fu">mutate</span>(<span class="at">oregon =</span> <span class="fu">factor</span>(province<span class="sc">==</span><span class="st">"Oregon"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>province)</span>
<span id="cb24-4"><a></a></span>
<span id="cb24-5"><a></a>wino <span class="sc">%&gt;%</span> </span>
<span id="cb24-6"><a></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-7"><a></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, oregon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 6
   drink oak   aromas bodied raspberry oregon
   &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt;  &lt;lgl&gt;  &lt;lgl&gt;     &lt;fct&gt; 
 1 TRUE  TRUE  FALSE  FALSE  FALSE     TRUE  
 2 FALSE TRUE  TRUE   TRUE   TRUE      FALSE 
 3 FALSE FALSE FALSE  FALSE  FALSE     TRUE  
 4 FALSE FALSE FALSE  FALSE  FALSE     TRUE  
 5 TRUE  FALSE FALSE  FALSE  FALSE     TRUE  
 6 FALSE FALSE FALSE  FALSE  TRUE      FALSE 
 7 FALSE FALSE FALSE  FALSE  TRUE      FALSE 
 8 FALSE TRUE  FALSE  FALSE  TRUE      FALSE 
 9 FALSE FALSE FALSE  FALSE  FALSE     TRUE  
10 FALSE FALSE TRUE   FALSE  FALSE     TRUE  </code></pre>
</div>
</div>
</section>
<section id="split-the-data" class="slide level2">
<h2>Split the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a>wine_index <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(wino<span class="sc">$</span>oregon, <span class="at">p =</span> <span class="fl">0.80</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb26-2"><a></a>train <span class="ot">&lt;-</span> wino[ wine_index, ]</span>
<span id="cb26-3"><a></a>test <span class="ot">&lt;-</span> wino[<span class="sc">-</span>wine_index, ]</span>
<span id="cb26-4"><a></a><span class="fu">table</span>(train<span class="sc">$</span>oregon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
FALSE  TRUE 
 4487  2156 </code></pre>
</div>
</div>
</section>
<section id="a-basic-model" class="slide level2">
<h2>A basic model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>control <span class="ot">=</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>, <span class="at">number =</span> <span class="dv">5</span>)</span>
<span id="cb28-2"><a></a>get_fit <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb28-3"><a></a>  <span class="fu">train</span>(oregon <span class="sc">~</span> .,</span>
<span id="cb28-4"><a></a>        <span class="at">data =</span> df, </span>
<span id="cb28-5"><a></a>        <span class="at">trControl =</span> control,</span>
<span id="cb28-6"><a></a>        <span class="at">method =</span> <span class="st">"glm"</span>,</span>
<span id="cb28-7"><a></a>        <span class="at">family =</span> <span class="st">"binomial"</span>,</span>
<span id="cb28-8"><a></a>        <span class="at">maxit =</span> <span class="dv">5</span>) <span class="co"># speed it up - default 100</span></span>
<span id="cb28-9"><a></a>}</span>
<span id="cb28-10"><a></a>fit <span class="ot">&lt;-</span> <span class="fu">get_fit</span>(train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-kappa" class="slide level2">
<h2>Check Kappa</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Penalized Multinomial Regression 

6644 samples
  22 predictor
   6 classes: 'Burgundy', 'California', 'Casablanca_Valley', 'Marlborough', 'New_York', 'Oregon' 

No pre-processing
Resampling: Cross-Validated (5 fold) 
Summary of sample sizes: 5315, 5315, 5315, 5316, 5315 
Resampling results across tuning parameters:

  decay  Accuracy   Kappa    
  0e+00  0.7245610  0.5683360
  1e-04  0.7245610  0.5683360
  1e-01  0.7251632  0.5691676

Accuracy was used to select the optimal model using the largest value.
The final value used for the model was decay = 0.1.</code></pre>
</div>
</div>
</section>
<section id="probability" class="slide level2">
<h2>Probability</h2>
<ul>
<li>See top coefficients</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>get_odds <span class="ot">&lt;-</span> <span class="cf">function</span>(fit) {</span>
<span id="cb31-2"><a></a>  <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">exp</span>(<span class="fu">coef</span>(fit<span class="sc">$</span>finalModel))))   <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">"name"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>name, <span class="at">names_to =</span> <span class="st">"class"</span>, <span class="at">values_to =</span> <span class="st">"odds"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(odds)) <span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a></a>  <span class="fu">head</span>()</span>
<span id="cb31-7"><a></a>}</span>
<span id="cb31-8"><a></a><span class="fu">get_odds</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  name        class              odds
  &lt;chr&gt;       &lt;chr&gt;             &lt;dbl&gt;
1 bodiedTRUE  California         5.19
2 (Intercept) Oregon             3.92
3 noseTRUE    California         2.80
4 oakTRUE     California         2.65
5 aromasTRUE  California         2.63
6 aromasTRUE  Casablanca_Valley  2.30</code></pre>
</div>
</div>
</section>
<section id="confusion-matrix" class="slide level2">
<h2>Confusion Matrix</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a>get_matrix <span class="ot">&lt;-</span> <span class="cf">function</span>(fit, df) {</span>
<span id="cb33-2"><a></a>  pred <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">predict</span>(fit, <span class="at">newdata =</span> df))</span>
<span id="cb33-3"><a></a>  <span class="fu">confusionMatrix</span>(pred,<span class="fu">factor</span>(df<span class="sc">$</span>oregon))</span>
<span id="cb33-4"><a></a>}</span>
<span id="cb33-5"><a></a><span class="fu">get_matrix</span>(fit,test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

          Reference
Prediction FALSE TRUE
     FALSE   996  165
     TRUE    125  373
                                         
               Accuracy : 0.8252         
                 95% CI : (0.806, 0.8432)
    No Information Rate : 0.6757         
    P-Value [Acc &gt; NIR] : &lt; 2e-16        
                                         
                  Kappa : 0.5933         
                                         
 Mcnemar's Test P-Value : 0.02201        
                                         
            Sensitivity : 0.8885         
            Specificity : 0.6933         
         Pos Pred Value : 0.8579         
         Neg Pred Value : 0.7490         
             Prevalence : 0.6757         
         Detection Rate : 0.6004         
   Detection Prevalence : 0.6998         
      Balanced Accuracy : 0.7909         
                                         
       'Positive' Class : FALSE          
                                         </code></pre>
</div>
</div>
<p>Not bad. But what if we decrease threshold for a word to be included?</p>
</section>
<section id="using-more-words" class="slide level2">
<h2>Using more words</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a>wino <span class="ot">&lt;-</span> <span class="fu">wine_words</span>(wine, <span class="dv">500</span>, F) <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a></a>  <span class="fu">mutate</span>(<span class="at">oregon =</span> <span class="fu">factor</span>(province<span class="sc">==</span><span class="st">"Oregon"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>province)</span>
<span id="cb35-4"><a></a>wine_index <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(wino<span class="sc">$</span>oregon, <span class="at">p =</span> <span class="fl">0.80</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb35-5"><a></a>train <span class="ot">&lt;-</span> wino[ wine_index, ]</span>
<span id="cb35-6"><a></a>test <span class="ot">&lt;-</span> wino[<span class="sc">-</span>wine_index, ]</span>
<span id="cb35-7"><a></a></span>
<span id="cb35-8"><a></a>fit <span class="ot">&lt;-</span> <span class="fu">get_fit</span>(train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-kappa-1" class="slide level2">
<h2>Check Kappa</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a>fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Penalized Multinomial Regression 

6696 samples
  54 predictor
   6 classes: 'Burgundy', 'California', 'Casablanca_Valley', 'Marlborough', 'New_York', 'Oregon' 

No pre-processing
Resampling: Cross-Validated (5 fold) 
Summary of sample sizes: 5359, 5356, 5356, 5357, 5356 
Resampling results across tuning parameters:

  decay  Accuracy  Kappa    
  0e+00  0.744476  0.6200617
  1e-04  0.744476  0.6200617
  1e-01  0.743879  0.6192105

Accuracy was used to select the optimal model using the largest value.
The final value used for the model was decay = 1e-04.</code></pre>
</div>
</div>
</section>
<section id="check-odds" class="slide level2">
<h2>Check odds</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a><span class="fu">get_odds</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  name          class       odds
  &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;
1 (Intercept)   Oregon      4.80
2 chocolateTRUE Oregon      4.00
3 bodiedTRUE    California  3.79
4 textureTRUE   California  3.45
5 oakTRUE       California  2.54
6 noseTRUE      California  2.48</code></pre>
</div>
</div>
</section>
<section id="confusion-matrix-1" class="slide level2">
<h2>Confusion Matrix</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a><span class="fu">get_matrix</span>(fit,test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

                   Reference
Prediction          Burgundy California Casablanca_Valley Marlborough New_York
  Burgundy               188         16                 2           2        4
  California              29        617                 8          16        9
  Casablanca_Valley        0          9                10           0        1
  Marlborough              0          1                 0           1        0
  New_York                 0          1                 0           0        4
  Oregon                  21        146                 6          26        8
                   Reference
Prediction          Oregon
  Burgundy              40
  California            70
  Casablanca_Valley      1
  Marlborough            0
  New_York               1
  Oregon               434

Overall Statistics
                                        
               Accuracy : 0.7504        
                 95% CI : (0.729, 0.771)
    No Information Rate : 0.4728        
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16     
                                        
                  Kappa : 0.6107        
                                        
 Mcnemar's Test P-Value : NA            

Statistics by Class:

                     Class: Burgundy Class: California Class: Casablanca_Valley
Sensitivity                   0.7899            0.7810                 0.384615
Specificity                   0.9553            0.8502                 0.993313
Pos Pred Value                0.7460            0.8238                 0.476190
Neg Pred Value                0.9648            0.8124                 0.990303
Prevalence                    0.1424            0.4728                 0.015560
Detection Rate                0.1125            0.3692                 0.005984
Detection Prevalence          0.1508            0.4482                 0.012567
Balanced Accuracy             0.8726            0.8156                 0.688964
                     Class: Marlborough Class: New_York Class: Oregon
Sensitivity                   0.0222222        0.153846        0.7949
Specificity                   0.9993850        0.998784        0.8160
Pos Pred Value                0.5000000        0.666667        0.6771
Neg Pred Value                0.9736369        0.986787        0.8913
Prevalence                    0.0269300        0.015560        0.3268
Detection Rate                0.0005984        0.002394        0.2597
Detection Prevalence          0.0011969        0.003591        0.3836
Balanced Accuracy             0.5108036        0.576315        0.8054</code></pre>
</div>
</div>
</section>
<section id="using-stems" class="slide level2">
<h2>Using stems</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a>wino <span class="ot">&lt;-</span> <span class="fu">wine_words</span>(wine, <span class="dv">1000</span>, T) <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a></a>  <span class="fu">mutate</span>(<span class="at">oregon =</span> <span class="fu">factor</span>(province<span class="sc">==</span><span class="st">"Oregon"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>province)</span>
<span id="cb42-4"><a></a>wine_index <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(wino<span class="sc">$</span>oregon, <span class="at">p =</span> <span class="fl">0.80</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb42-5"><a></a>train <span class="ot">&lt;-</span> wino[ wine_index, ]</span>
<span id="cb42-6"><a></a>test <span class="ot">&lt;-</span> wino[<span class="sc">-</span>wine_index, ]</span>
<span id="cb42-7"><a></a></span>
<span id="cb42-8"><a></a>fit <span class="ot">&lt;-</span> <span class="fu">get_fit</span>(train)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-kappa-2" class="slide level2">
<h2>Check Kappa</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a>fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Penalized Multinomial Regression 

6689 samples
  29 predictor
   6 classes: 'Burgundy', 'California', 'Casablanca_Valley', 'Marlborough', 'New_York', 'Oregon' 

No pre-processing
Resampling: Cross-Validated (5 fold) 
Summary of sample sizes: 5351, 5351, 5353, 5350, 5351 
Resampling results across tuning parameters:

  decay  Accuracy  Kappa    
  0e+00  0.744509  0.5974314
  1e-04  0.744509  0.5974314
  1e-01  0.744509  0.5974314

Accuracy was used to select the optimal model using the largest value.
The final value used for the model was decay = 0.1.</code></pre>
</div>
</div>
</section>
<section id="check-odds-1" class="slide level2">
<h2>Check odds</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a><span class="fu">get_odds</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  name        class       odds
  &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;
1 bodiTRUE    California  4.06
2 (Intercept) Oregon      3.92
3 noseTRUE    California  3.31
4 cherriTRUE  Oregon      3.14
5 texturTRUE  California  2.99
6 oakTRUE     California  2.65</code></pre>
</div>
</div>
</section>
<section id="confusion-matrix-2" class="slide level2">
<h2>Confusion Matrix</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="fu">get_matrix</span>(fit,test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

                   Reference
Prediction          Burgundy California Casablanca_Valley Marlborough New_York
  Burgundy               181         13                 1           3        7
  California              40        597                 8          16       10
  Casablanca_Valley        0          2                 4           0        1
  Marlborough              0          0                 0           0        0
  New_York                 0          0                 0           1        0
  Oregon                  17        178                13          25        8
                   Reference
Prediction          Oregon
  Burgundy              28
  California            83
  Casablanca_Valley      0
  Marlborough            0
  New_York               0
  Oregon               434

Overall Statistics
                                          
               Accuracy : 0.7281          
                 95% CI : (0.7061, 0.7494)
    No Information Rate : 0.4731          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.5716          
                                          
 Mcnemar's Test P-Value : NA              

Statistics by Class:

                     Class: Burgundy Class: California Class: Casablanca_Valley
Sensitivity                   0.7605            0.7557                 0.153846
Specificity                   0.9637            0.8216                 0.998175
Pos Pred Value                0.7768            0.7918                 0.571429
Neg Pred Value                0.9603            0.7893                 0.986771
Prevalence                    0.1425            0.4731                 0.015569
Detection Rate                0.1084            0.3575                 0.002395
Detection Prevalence          0.1395            0.4515                 0.004192
Balanced Accuracy             0.8621            0.7886                 0.576011
                     Class: Marlborough Class: New_York Class: Oregon
Sensitivity                     0.00000       0.0000000        0.7963
Specificity                     1.00000       0.9993917        0.7858
Pos Pred Value                      NaN       0.0000000        0.6430
Neg Pred Value                  0.97305       0.9844218        0.8884
Prevalence                      0.02695       0.0155689        0.3263
Detection Rate                  0.00000       0.0000000        0.2599
Detection Prevalence            0.00000       0.0005988        0.4042
Balanced Accuracy               0.50000       0.4996959        0.7911</code></pre>
</div>
</div>
<p>Even better?</p>
</section></section>
<section>
<section id="receiver-operating-characteristic-roc-curve" class="title-slide slide level1 center">
<h1>Receiver Operating Characteristic (ROC) Curve</h1>

</section>
<section id="roc-curve" class="slide level2">
<h2>ROC Curve</h2>
<blockquote>
<p><a href="https://en.wikipedia.org/wiki/Receiver_operating_characteristic">A receiver operating characteristic curve, or ROC curve, is a graphical plot that illustrates the performance of a binary classifier model (can be used for multi class classification as well) at varying threshold values.</a></p>
</blockquote>
</section>
<section id="image" class="slide level2">
<h2>Image</h2>

<img data-src="https://upload.wikimedia.org/wikipedia/commons/6/6b/Roccurves.png" class="r-stretch"></section>
<section id="sensitivity" class="slide level2">
<h2>Sensitivity</h2>
<ul>
<li><strong>Sensitivity</strong>: True Positive Rate</li>
<li>Measures how well the model detects true positives.
<ul>
<li>TP: True Positive</li>
<li>FN: False Negative</li>
</ul></li>
</ul>
<p><span class="math display">\[
\text{Sensitivity} = \frac{\text{TP}}{\text{TP} + \text{FN}}
\]</span></p>
</section>
<section id="specificifity" class="slide level2">
<h2>Specificifity</h2>
<ul>
<li><strong>Specificity</strong>: True Negative Rate</li>
<li>Measures how well the model avoids false positives.
<ul>
<li>FP: False Positive</li>
<li>TN: True Negative</li>
</ul></li>
</ul>
<p><span class="math display">\[  
\text{Specificity} = \frac{\text{TN}}{\text{TN} + \text{FP}}
\]</span></p>
</section>
<section id="storm-prediction" class="slide level2">
<h2>Storm Prediction</h2>
<ul>
<li><strong>True Positive (TP):</strong> The model predicts a storm, and a storm actually occurs.</li>
<li><strong>False Positive (FP):</strong> The model predicts a storm, but no storm occurs (false alarm).</li>
<li><strong>True Negative (TN):</strong> The model predicts no storm, and no storm occurs.</li>
<li><strong>False Negative (FN):</strong> The model predicts no storm, but a storm actually occurs (missed event).</li>
</ul>
</section>
<section id="goals" class="slide level2">
<h2>Goals</h2>
<ul>
<li>A perfect model would have both
<ul>
<li>high sensitivity
<ul>
<li>(detecting all real storms) and</li>
</ul></li>
<li>high specificity
<ul>
<li>(avoiding false alarms).</li>
</ul></li>
</ul></li>
<li>The ROC curve helps analyze this trade-off.</li>
</ul>
</section>
<section id="interpreting-the-roc-curve" class="slide level2">
<h2>Interpreting the ROC Curve</h2>
<ul>
<li>A point near (0,1) on the ROC curve represents high sensitivity and high specificity (ideal performance).</li>
</ul>

<img data-src="https://upload.wikimedia.org/wikipedia/commons/3/36/ROC_space-2.png" class="r-stretch"></section>
<section id="interpreting-the-roc-curve-1" class="slide level2">
<h2>Interpreting the ROC Curve</h2>
<ul>
<li>A curve closer to the <strong>diagonal line</strong> (random guessing) indicates poor predictive ability.</li>
</ul>

<img data-src="https://upload.wikimedia.org/wikipedia/commons/3/36/ROC_space-2.png" class="r-stretch"></section>
<section id="interpreting-the-roc-curve-2" class="slide level2">
<h2>Interpreting the ROC Curve</h2>
<ul>
<li>The <strong>Area Under the Curve (AUC)</strong> quantifies the overall model performance, with <strong>AUC = 1</strong> being perfect and <strong>AUC = 0.5</strong> being no better than chance.</li>
</ul>

<img data-src="https://upload.wikimedia.org/wikipedia/commons/1/13/Roc_curve.svg" class="r-stretch"></section>
<section id="model-tuning" class="slide level2">
<h2>Model Tuning</h2>
<ul>
<li>In e.g.&nbsp;a storm model….</li>
<li>adjusting the model’s decision threshold
<ul>
<li>(e.g., how strong a weather signal needs to be before predicting a storm),</li>
<li>we can move along the ROC curve to balance
<ul>
<li>sensitivity and</li>
<li>specificity.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="roc-curve-evaluation" class="slide level2">
<h2>ROC Curve evaluation</h2>
<ul>
<li>Let’s look at our most recent fit:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a>fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Generalized Linear Model 

6688 samples
  29 predictor
   2 classes: 'FALSE', 'TRUE' 

No pre-processing
Resampling: Cross-Validated (5 fold) 
Summary of sample sizes: 5351, 5351, 5350, 5349, 5351 
Resampling results:

  Accuracy   Kappa    
  0.8449465  0.6420326</code></pre>
</div>
</div>
</section>
<section id="see-the-curve" class="slide level2">
<h2>See the curve</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a>prob <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit, <span class="at">newdata =</span> test, <span class="at">type =</span> <span class="st">"prob"</span>)[,<span class="dv">2</span>]</span>
<span id="cb51-2"><a></a>myRoc <span class="ot">&lt;-</span> <span class="fu">roc</span>(test<span class="sc">$</span>oregon, prob)</span>
<span id="cb51-3"><a></a><span class="fu">plot</span>(myRoc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a></a><span class="fu">auc</span>(myRoc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Area under the curve: 0.9175</code></pre>
</div>
</div>
<img data-src="Session05_files/figure-revealjs/unnamed-chunk-6-1.png" width="960" class="r-stretch"></section>
<section id="exercise" class="slide level2">
<h2>Exercise</h2>
<ol type="1">
<li>Gather into your prediction teams.</li>
<li>Choose a Pinot province other than Oregon or California</li>
<li>Use logistic regression to find the words/terms that increase the odds of choosing that province the most</li>
</ol>
</section></section>
<section id="vocabulary" class="title-slide slide level1 center">
<h1>Vocabulary</h1>
<ul>
<li>Logistic Regression</li>
<li>Odds</li>
<li>Sensitivity</li>
<li>Specificity</li>
<li>ROC</li>
<li>AUC</li>
</ul>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="../index.html">Home</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>