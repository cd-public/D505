<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-a4a11d514c7d463668e07712114998e6.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.30">

  <meta name="author" content="Jameson > Hendrik > Calvin">
  <title>K Nearest Neighbors</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-ffcbf325be4bf09b74891d05b29692c2.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title"><span class="math inline">\(K\)</span> Nearest Neighbors</h1>
  <p class="subtitle">Applied Machine Learning</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Jameson &gt; Hendrik &gt; Calvin 
</div>
</div>
</div>

</section>
<section id="agenda" class="slide level2">
<h2>Agenda</h2>
<ol type="1">
<li>Review of Homework 2</li>
<li>A human understanding of regression</li>
<li>Dinner break</li>
<li>Preprocessing and BoxCox</li>
<li>The KNN algorithm and the Confusion Matrix</li>
</ol>
</section>
<section id="setup" class="slide level2">
<h2>Setup</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a></a><span class="fu">library</span>(moderndive)</span>
<span id="cb1-3"><a></a><span class="fu">library</span>(class)</span>
<span id="cb1-4"><a></a><span class="fu">library</span>(caret)</span>
<span id="cb1-5"><a></a><span class="fu">library</span>(fastDummies)</span>
<span id="cb1-6"><a></a>wine <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">gzcon</span>(<span class="fu">url</span>(<span class="st">"https://cd-public.github.io/D505/dat/wine.rds"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a></a>  <span class="fu">mutate</span>(<span class="at">lprice =</span> <span class="fu">log</span>(price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section>
<section id="reporting-impact-from-regressions" class="title-slide slide level1 center">
<h1>Reporting Impact from Regressions</h1>

</section>
<section id="correlation" class="slide level2">
<h2>Correlation</h2>
<p><a href="https://moderndive.com/5-regression.html"><em>Credit:</em> Modern Dive</a></p>
<p><a href="http://guessthecorrelation.com/">http://guessthecorrelation.com/</a> …my high score is 72 (Jameson 122)</p>

<img data-src="./images/correlation.png" class="r-stretch"></section>
<section id="calculating-correlation" class="slide level2">
<h2>Calculating correlation</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a>wine <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a></a>  <span class="fu">summarise</span>(<span class="at">cor_p=</span><span class="fu">cor</span>(price,points),<span class="at">cor_lp=</span><span class="fu">cor</span>(lprice,points))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  cor_p cor_lp
  &lt;dbl&gt;  &lt;dbl&gt;
1 0.404  0.624</code></pre>
</div>
</div>
</section>
<section id="exercise" class="slide level2">
<h2>Exercise</h2>
<ol type="1">
<li>Calculate the correlation between log(price) and points</li>
<li>by variety</li>
<li>for Oregon Chardonnay, Pinot Noir and Pinot Gris</li>
<li>in the same tibble</li>
</ol>
</section>
<section id="solution" class="slide level2">
<h2>Solution</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>wine <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a></a>  <span class="fu">filter</span>(province<span class="sc">==</span><span class="st">"Oregon"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a></a>  <span class="fu">filter</span>(variety <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chardonnay"</span>,<span class="st">"Pinot Noir"</span>,<span class="st">"Pinot Gris"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a></a>  <span class="fu">group_by</span>(variety) <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a></a>  <span class="fu">summarise</span>(<span class="at">correlation=</span><span class="fu">cor</span>(lprice,points))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  variety    correlation
  &lt;chr&gt;            &lt;dbl&gt;
1 Chardonnay       0.642
2 Pinot Gris       0.490
3 Pinot Noir       0.591</code></pre>
</div>
</div>
</section>
<section id="visualizing-these-different-correlations" class="slide level2">
<h2>Visualizing these different correlations</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a>wine <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a></a>  <span class="fu">filter</span>(province<span class="sc">==</span><span class="st">"Oregon"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a></a>  <span class="fu">filter</span>(variety <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chardonnay"</span>,<span class="st">"Pinot Noir"</span>,<span class="st">"Pinot Gris"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(points,lprice, <span class="at">color=</span>variety)) <span class="sc">+</span></span>
<span id="cb6-5"><a></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.3</span>)<span class="sc">+</span></span>
<span id="cb6-6"><a></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>variety)<span class="sc">+</span></span>
<span id="cb6-7"><a></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Session03_files/figure-revealjs/unnamed-chunk-3-1.png" width="960" class="r-stretch"></section>
<section id="graphing-residuals-bad" class="slide level2">
<h2>Graphing residuals (bad)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(price<span class="sc">~</span>points, <span class="fu">filter</span>(wine,province<span class="sc">==</span><span class="st">"Oregon"</span>))</span>
<span id="cb7-2"><a></a><span class="fu">get_regression_points</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(points, residual))<span class="sc">+</span></span>
<span id="cb7-4"><a></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Session03_files/figure-revealjs/unnamed-chunk-4-1.png" width="960" class="r-stretch"></section>
<section id="graphing-residuals-good" class="slide level2">
<h2>Graphing residuals (good)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(lprice<span class="sc">~</span>points, <span class="fu">filter</span>(wine,province<span class="sc">==</span><span class="st">"Oregon"</span>))</span>
<span id="cb8-2"><a></a><span class="fu">get_regression_points</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(points, residual))<span class="sc">+</span></span>
<span id="cb8-4"><a></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Session03_files/figure-revealjs/unnamed-chunk-5-1.png" width="960" class="r-stretch"></section>
<section id="interpreting-the-coefficients" class="slide level2">
<h2>Interpreting the coefficients</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(lprice<span class="sc">~</span>points, <span class="fu">filter</span>(wine,province<span class="sc">==</span><span class="st">"Oregon"</span>))</span>
<span id="cb9-2"><a></a>pct <span class="ot">=</span> (<span class="fu">exp</span>(<span class="fu">coef</span>(model)[<span class="st">"points"</span>]) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Since we logged the DV, a 1 point ratings increase = <code>9.85</code>% increase in price on average.</p>
<p>Note: <span class="math display">\[ (e^x-1)*100 \]</span></p>
</section>
<section id="even-moar-awesomer-with-some-code-fu" class="slide level2">
<h2>Even moar awesomer with some code fu</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="cf">for</span>(v <span class="cf">in</span> <span class="fu">c</span>(<span class="st">"Chardonnay"</span>, <span class="st">"Pinot Gris"</span>,<span class="st">"Pinot Noir"</span>)){</span>
<span id="cb10-2"><a></a>  m <span class="ot">&lt;-</span> <span class="fu">lm</span>(lprice<span class="sc">~</span>points, <span class="fu">filter</span>(wine,province<span class="sc">==</span><span class="st">"Oregon"</span>, variety<span class="sc">==</span>v))</span>
<span id="cb10-3"><a></a>  pct <span class="ot">&lt;-</span> <span class="fu">round</span>((<span class="fu">exp</span>(<span class="fu">coef</span>(m)[<span class="st">"points"</span>]) <span class="sc">-</span> <span class="dv">1</span>) <span class="sc">*</span> <span class="dv">100</span>,<span class="dv">2</span>)</span>
<span id="cb10-4"><a></a>  <span class="fu">print</span>(<span class="fu">str_c</span>(<span class="st">"For "</span>,v,<span class="st">", a 1 point ratings increase leads to a "</span>,pct,<span class="st">"% increase in price."</span>))</span>
<span id="cb10-5"><a></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "For Chardonnay, a 1 point ratings increase leads to a 11.34% increase in price."
[1] "For Pinot Gris, a 1 point ratings increase leads to a 5.46% increase in price."
[1] "For Pinot Noir, a 1 point ratings increase leads to a 10.27% increase in price."</code></pre>
</div>
</div>
</section>
<section id="logged-feature" class="slide level2">
<h2>Logged feature</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(price<span class="sc">~</span>lpoints, <span class="fu">filter</span>(wine,province<span class="sc">==</span><span class="st">"Oregon"</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">lpoints=</span><span class="fu">log</span>(points)))</span>
<span id="cb12-2"><a></a>model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = price ~ lpoints, data = filter(wine, province == 
    "Oregon") %&gt;% mutate(lpoints = log(points)))

Coefficients:
(Intercept)      lpoints  
    -1419.0        324.4  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>inc <span class="ot">=</span> <span class="fu">coef</span>(model)[<span class="st">"lpoints"</span>]<span class="sc">/</span><span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Since we logged the IV (feature), a 1% ratings increase = <code>3.24</code> increase in price on average.</p>
<p>Note: <span class="math display">\[ x/100 \]</span></p>
</section>
<section id="loglog-also-elasticity" class="slide level2">
<h2>LogLog (also elasticity)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(lprice<span class="sc">~</span>lpoints, <span class="fu">filter</span>(wine,province<span class="sc">==</span><span class="st">"Oregon"</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">lpoints=</span><span class="fu">log</span>(points)))</span>
<span id="cb15-2"><a></a>model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lprice ~ lpoints, data = filter(wine, province == 
    "Oregon") %&gt;% mutate(lpoints = log(points)))

Coefficients:
(Intercept)      lpoints  
    -33.770        8.298  </code></pre>
</div>
</div>
<p>…a 1% increase in ratings equals a <code>8.3</code>% increase in price on average</p>
</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<ul>
<li>Only the dependent/response variable is log-transformed. Exponentiate the coefficient, subtract one from this number, and multiply by 100. This gives the percent increase (or decrease) in the response for every one-unit increase in the independent variable. Example: the coefficient is 0.198. (exp(0.198) – 1) * 100 = 21.9. For every one-unit increase in the independent variable, our dependent variable increases by about 22%.</li>
<li>Only independent/predictor variable(s) is log-transformed. Divide the coefficient by 100. This tells us that a 1% increase in the independent variable increases (or decreases) the dependent variable by (coefficient/100) units. Example: the coefficient is 0.198. 0.198/100 = 0.00198. For every 1% increase in the independent variable, our dependent variable increases by about 0.002.</li>
<li>Both dependent/response variable and independent/predictor variable(s) are log-transformed. Interpret the coefficient as the percent increase in the dependent variable for every 1% increase in the independent variable. Example: the coefficient is 0.198. For every 1% increase in the independent variable, our dependent variable increases by about 0.20%.</li>
</ul>
</section>
<section id="graphing-points-by-variety" class="slide level2">
<h2>Graphing points by variety</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>wine <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a></a>  <span class="fu">filter</span>(province<span class="sc">==</span><span class="st">"Oregon"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a></a>  <span class="fu">filter</span>(variety <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chardonnay"</span>,<span class="st">"Pinot Noir"</span>,<span class="st">"Pinot Gris"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(variety,points))<span class="sc">+</span></span>
<span id="cb17-5"><a></a>    <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Session03_files/figure-revealjs/unnamed-chunk-10-1.png" width="960" class="r-stretch"></section>
<section id="summary-1" class="slide level2">
<h2>Summary</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>(tmp <span class="ot">&lt;-</span> wine <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a></a>  <span class="fu">filter</span>(province<span class="sc">==</span><span class="st">"Oregon"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a></a>  <span class="fu">filter</span>(variety <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chardonnay"</span>,<span class="st">"Pinot Noir"</span>,<span class="st">"Pinot Gris"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a></a>  <span class="fu">group_by</span>(variety) <span class="sc">%&gt;%</span> </span>
<span id="cb18-5"><a></a>  <span class="fu">summarise</span>(<span class="at">mean=</span><span class="fu">mean</span>(points)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  variety     mean
  &lt;chr&gt;      &lt;dbl&gt;
1 Chardonnay  89.7
2 Pinot Gris  88.5
3 Pinot Noir  89.5</code></pre>
</div>
</div>
<p>Note:</p>
<ol type="1">
<li>The difference between Pinot Gris and Chardonnay is -1.2402471</li>
<li>The difference between Pinot Noir and Chardonnay is -0.2555915</li>
</ol>
</section>
<section id="regression" class="slide level2">
<h2>Regression</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(points<span class="sc">~</span>variety, </span>
<span id="cb20-2"><a></a>            <span class="fu">filter</span>(wine,province<span class="sc">==</span><span class="st">"Oregon"</span>,variety <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Chardonnay"</span>,<span class="st">"Pinot Noir"</span>,<span class="st">"Pinot Gris"</span>)))</span>
<span id="cb20-3"><a></a><span class="fu">get_regression_table</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 7
  term                estimate std_error statistic p_value lower_ci upper_ci
  &lt;chr&gt;                  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 intercept             89.7       0.122    737.     0       89.5     90.0  
2 variety: Pinot Gris   -1.24      0.177     -7.03   0       -1.59    -0.894
3 variety: Pinot Noir   -0.256     0.132     -1.94   0.053   -0.515    0.003</code></pre>
</div>
</div>
<p>What is the equation for this regression?</p>
</section>
<section id="assumptions-of-linear-regression" class="slide level2">
<h2>Assumptions of linear regression</h2>
<ol type="1">
<li><strong>L</strong>inearity of relationship between variables</li>
<li><strong>I</strong>ndependence of the residuals</li>
<li><strong>N</strong>ormality of the residuals</li>
<li><strong>E</strong>quality of variance of the residuals</li>
</ol>
</section>
<section id="linearity-of-relationship" class="slide level2">
<h2>Linearity of relationship</h2>
<p><a href="https://moderndive.com/5-regression.html"><em>Credit:</em> Modern Dive</a></p>

<img data-src="./images/non-linear.png" class="r-stretch"><p>What would the residuals look like?</p>
</section>
<section id="independence" class="slide level2">
<h2>Independence</h2>
<p>Given our original model of <span class="math inline">\(log(price)=m*Points+b\)</span>…</p>
<h3 id="are-there-any-problems-with-independence">…are there any problems with independence?</h3>
</section>
<section id="normality" class="slide level2">
<h2>Normality</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(lprice<span class="sc">~</span>points, <span class="fu">filter</span>(wine,province<span class="sc">==</span><span class="st">"Oregon"</span>))</span>
<span id="cb22-2"><a></a><span class="fu">get_regression_points</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(residual))<span class="sc">+</span></span>
<span id="cb22-4"><a></a>    <span class="fu">geom_histogram</span>(<span class="at">color=</span><span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Session03_files/figure-revealjs/unnamed-chunk-13-1.png" width="960" class="r-stretch"></section>
<section id="equality-of-variance" class="slide level2">
<h2>Equality of variance</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a><span class="fu">get_regression_points</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(points, residual))<span class="sc">+</span></span>
<span id="cb23-3"><a></a>    <span class="fu">geom_jitter</span>(<span class="at">alpha=</span><span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Session03_files/figure-revealjs/unnamed-chunk-14-1.png" width="960" class="r-stretch"></section>
<section id="no-equality-in-the-variance" class="slide level2">
<h2>No equality in the variance</h2>
<p><a href="https://moderndive.com/5-regression.html"><em>Credit:</em> Modern Dive</a></p>

<img data-src="./images/unequal-variance.png" class="r-stretch"></section></section>
<section id="dinner-and-vitural-high-fives" class="title-slide slide level1 center">
<h1>Dinner (and vitural high fives)</h1>

<img data-src="./images/comic3.png" class="r-stretch"></section>

<section>
<section id="preprocessing-and-boxcox" class="title-slide slide level1 center">
<h1>Preprocessing and BoxCox</h1>

</section>
<section id="setup-1" class="slide level2">
<h2>Setup</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>wine <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">gzcon</span>(<span class="fu">url</span>(<span class="st">"https://cd-public.github.io/D505/dat/pinot_orig.rds"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="preprocessing" class="title-slide slide level1 center">
<h1>Preprocessing</h1>
<p>Box-Cox transformations use MLE to estimate <span class="math inline">\(\lambda\)</span></p>
<p><span class="math inline">\(x^{*} = \frac{x^{\lambda}-1}{\lambda\: \tilde{x}^{\lambda-1}}\)</span></p>
<ul>
<li>when <span class="math inline">\(\lambda=1\)</span>, there is no transformation</li>
<li>when <span class="math inline">\(\lambda=0\)</span>, it is log transformed</li>
<li>when <span class="math inline">\(\lambda=0.5\)</span>, it is square root</li>
<li>when <span class="math inline">\(\lambda=-1\)</span>, it is an inverse</li>
</ul>
</section>
<section id="caret-preprocessing-is-so-easy" class="slide level2">
<h2>Caret preprocessing is so easy!</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>wine <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a></a>  <span class="fu">preProcess</span>(<span class="at">method =</span> <span class="fu">c</span>(<span class="st">"BoxCox"</span>,<span class="st">"center"</span>,<span class="st">"scale"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a></a>  <span class="fu">predict</span>(wine) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>description) <span class="sc">%&gt;%</span> </span>
<span id="cb25-5"><a></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    province      price    points        year    taster_name
1     Oregon  0.7146905 -1.033841 -0.03425331   Paul Gregutt
2     Oregon -1.4139991 -1.033841  0.33313680   Paul Gregutt
3 California  0.8225454 -1.033841 -0.40146088 Virginie Boone
4     Oregon  0.2408520 -1.367723 -0.76848588   Paul Gregutt
5     Oregon -1.2418658 -1.367723 -1.13532834   Paul Gregutt
6     Oregon -1.0109945 -1.367723  1.06846470   Paul Gregutt</code></pre>
</div>
</div>
<p>But wait… what is wrong here?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>wino <span class="ot">&lt;-</span> wine <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a></a>  <span class="fu">mutate</span>(<span class="at">year_f =</span> <span class="fu">as.factor</span>(year))</span>
<span id="cb27-3"><a></a></span>
<span id="cb27-4"><a></a>wino <span class="ot">&lt;-</span> wino <span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a></a>  <span class="fu">preProcess</span>(<span class="at">method =</span> <span class="fu">c</span>(<span class="st">"BoxCox"</span>,<span class="st">"center"</span>,<span class="st">"scale"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-6"><a></a>  <span class="fu">predict</span>(wino)</span>
<span id="cb27-7"><a></a></span>
<span id="cb27-8"><a></a><span class="fu">head</span>(wino <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"year"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         year year_f
1 -0.03425331   2012
2  0.33313680   2013
3 -0.40146088   2011
4 -0.76848588   2010
5 -1.13532834   2009
6  1.06846470   2015</code></pre>
</div>
</div>
</section></section>
<section>
<section id="the-knn-algorithm" class="title-slide slide level1 center">
<h1>The KNN Algorithm</h1>

</section>
<section id="algorithm" class="slide level2">
<h2>Algorithm</h2>
<ol type="1">
<li>Load the data</li>
<li>Initialize K to your chosen number of neighbors</li>
<li>For each example in the data</li>
<li>Calculate the distance between the query example and the current example from the data.</li>
<li>Add the distance and the index of the example to an ordered collection</li>
<li>Sort the ordered collection of distances and indices from smallest to largest (in ascending order) by the distances</li>
<li>Pick the first K entries from the sorted collection</li>
<li>Get the labels of the selected K entries</li>
<li>If regression, return the mean of the K labels</li>
<li>If classification, return the mode of the K labels</li>
</ol>
</section>
<section id="lets-draw-it" class="slide level2">
<h2>Let’s draw it</h2>
<p>&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp; &nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;<br>
&nbsp;</p>
</section>
<section id="engineering-some-features" class="slide level2">
<h2>Engineering some features</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>wino <span class="ot">&lt;-</span> wino <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a></a>  <span class="fu">mutate</span>(<span class="at">taster_name =</span> <span class="fu">fct_lump</span>(taster_name,<span class="dv">5</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a></a>  <span class="fu">dummy_cols</span>(</span>
<span id="cb29-4"><a></a>    <span class="at">select_columns =</span> <span class="fu">c</span>(<span class="st">"year_f"</span>,<span class="st">"taster_name"</span>),</span>
<span id="cb29-5"><a></a>    <span class="at">remove_most_frequent_dummy =</span> T, </span>
<span id="cb29-6"><a></a>    <span class="at">remove_selected_columns =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb29-7"><a></a>  <span class="fu">rename_all</span>(<span class="fu">funs</span>(<span class="fu">tolower</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb29-8"><a></a>  <span class="fu">rename_all</span>(<span class="fu">funs</span>(<span class="fu">str_replace_all</span>(., <span class="st">"-"</span>, <span class="st">"_"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb29-9"><a></a>  <span class="fu">rename_all</span>(<span class="fu">funs</span>(<span class="fu">str_replace_all</span>(., <span class="st">" "</span>, <span class="st">"_"</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb29-10"><a></a>  <span class="fu">mutate</span>(<span class="at">cherry =</span> <span class="fu">str_detect</span>(description,<span class="st">"cherry"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-11"><a></a>  <span class="fu">mutate</span>(<span class="at">chocolate =</span> <span class="fu">str_detect</span>(description,<span class="st">"chocolate"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-12"><a></a>  <span class="fu">mutate</span>(<span class="at">earth =</span> <span class="fu">str_detect</span>(description,<span class="st">"earth"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-13"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>description)</span>
<span id="cb29-14"><a></a></span>
<span id="cb29-15"><a></a><span class="fu">head</span>(wino) <span class="sc">%&gt;%</span> </span>
<span id="cb29-16"><a></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    province      price    points        year year_f_1996 year_f_1997
1     Oregon  0.7146905 -1.033841 -0.03425331           0           0
2     Oregon -1.4139991 -1.033841  0.33313680           0           0
3 California  0.8225454 -1.033841 -0.40146088           0           0
4     Oregon  0.2408520 -1.367723 -0.76848588           0           0
5     Oregon -1.2418658 -1.367723 -1.13532834           0           0
6     Oregon -1.0109945 -1.367723  1.06846470           0           0
  year_f_1998 year_f_1999
1           0           0
2           0           0
3           0           0
4           0           0
5           0           0
6           0           0</code></pre>
</div>
</div>
</section>
<section id="simple-model" class="slide level2">
<h2>Simple model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a><span class="fu">set.seed</span>(<span class="dv">504</span>)</span>
<span id="cb31-2"><a></a>wine_index <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(wino<span class="sc">$</span>province, <span class="at">p =</span> <span class="fl">0.8</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb31-3"><a></a>train <span class="ot">&lt;-</span> wino[ wine_index, ]</span>
<span id="cb31-4"><a></a>test <span class="ot">&lt;-</span> wino[<span class="sc">-</span>wine_index, ]</span>
<span id="cb31-5"><a></a></span>
<span id="cb31-6"><a></a>fit <span class="ot">&lt;-</span> <span class="fu">knn</span>(</span>
<span id="cb31-7"><a></a>  <span class="at">train =</span> <span class="fu">select</span>(train,<span class="sc">-</span>province), </span>
<span id="cb31-8"><a></a>  <span class="at">test =</span> <span class="fu">select</span>(test,<span class="sc">-</span>province), </span>
<span id="cb31-9"><a></a>  <span class="at">k=</span><span class="dv">5</span>, </span>
<span id="cb31-10"><a></a>  <span class="at">cl =</span> train<span class="sc">$</span>province, </span>
<span id="cb31-11"><a></a>  <span class="at">prob =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="confusion-matrix" class="slide level2">
<h2>Confusion matrix</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="fu">confusionMatrix</span>(fit,<span class="fu">factor</span>(test<span class="sc">$</span>province))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

                   Reference
Prediction          Burgundy California Casablanca_Valley Marlborough New_York
  Burgundy               235          0                 0           0        0
  California               0        773                 0           0        0
  Casablanca_Valley        0          0                 8           6        3
  Marlborough              0          0                 8          19       11
  New_York                 0          0                 3          12       11
  Oregon                   3         18                 7           8        1
                   Reference
Prediction          Oregon
  Burgundy               2
  California             0
  Casablanca_Valley      1
  Marlborough            2
  New_York               1
  Oregon               541

Overall Statistics
                                          
               Accuracy : 0.9486          
                 95% CI : (0.9369, 0.9587)
    No Information Rate : 0.4728          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.9206          
                                          
 Mcnemar's Test P-Value : NA              

Statistics by Class:

                     Class: Burgundy Class: California Class: Casablanca_Valley
Sensitivity                   0.9874            0.9772                 0.307692
Specificity                   0.9986            1.0000                 0.993928
Pos Pred Value                0.9916            1.0000                 0.444444
Neg Pred Value                0.9979            0.9800                 0.989124
Prevalence                    0.1423            0.4728                 0.015541
Detection Rate                0.1405            0.4620                 0.004782
Detection Prevalence          0.1417            0.4620                 0.010759
Balanced Accuracy             0.9930            0.9886                 0.650810
                     Class: Marlborough Class: New_York Class: Oregon
Sensitivity                     0.42222        0.423077        0.9890
Specificity                     0.98710        0.990285        0.9671
Pos Pred Value                  0.47500        0.407407        0.9360
Neg Pred Value                  0.98408        0.990887        0.9945
Prevalence                      0.02690        0.015541        0.3270
Detection Rate                  0.01136        0.006575        0.3234
Detection Prevalence            0.02391        0.016139        0.3455
Balanced Accuracy               0.70466        0.706681        0.9781</code></pre>
</div>
</div>
</section>
<section id="kappa-statistic" class="slide level2">
<h2>Kappa statistic</h2>
<p>Compares observed accuracy against what would be expected by a random classifier.</p>
<ul>
<li>&lt; 0.2 (not so good)</li>
<li>0.21 - 0.4 (ok)</li>
<li>0.41 - 0.6 (pretty good)</li>
<li>0.6 - 0.8 (great)</li>
<li>&gt; 0.8 (almost perfect)</li>
</ul>
<p>…whoa! What’s going on here?</p>
</section>
<section id="fixing-the-leak" class="slide level2">
<h2>Fixing the leak</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a>wino <span class="ot">&lt;-</span> <span class="fu">select</span>(wino, <span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">"taster"</span>)) <span class="co"># get rid of the taster variables</span></span>
<span id="cb34-2"><a></a></span>
<span id="cb34-3"><a></a><span class="fu">set.seed</span>(<span class="dv">504</span>)</span>
<span id="cb34-4"><a></a>wine_index <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(wino<span class="sc">$</span>province, <span class="at">p =</span> <span class="fl">0.8</span>, <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb34-5"><a></a>train <span class="ot">&lt;-</span> wino[ wine_index, ]</span>
<span id="cb34-6"><a></a>test <span class="ot">&lt;-</span> wino[<span class="sc">-</span>wine_index, ]</span>
<span id="cb34-7"><a></a></span>
<span id="cb34-8"><a></a>fit <span class="ot">&lt;-</span> <span class="fu">knn</span>(</span>
<span id="cb34-9"><a></a>  <span class="at">train =</span> <span class="fu">select</span>(train,<span class="sc">-</span>province), </span>
<span id="cb34-10"><a></a>  <span class="at">test =</span> <span class="fu">select</span>(test,<span class="sc">-</span>province), </span>
<span id="cb34-11"><a></a>  <span class="at">k=</span><span class="dv">5</span>, </span>
<span id="cb34-12"><a></a>  <span class="at">cl =</span> train<span class="sc">$</span>province, </span>
<span id="cb34-13"><a></a>  <span class="at">prob =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="confusion-matrix-1" class="slide level2">
<h2>Confusion matrix</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a><span class="fu">confusionMatrix</span>(fit, <span class="fu">factor</span>(test<span class="sc">$</span>province))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

                   Reference
Prediction          Burgundy California Casablanca_Valley Marlborough New_York
  Burgundy               113         40                 3           6        1
  California              49        609                11          14       10
  Casablanca_Valley        2          4                 0           1        1
  Marlborough              4          6                 3           3        3
  New_York                 1          3                 0           5        2
  Oregon                  69        129                 9          16        9
                   Reference
Prediction          Oregon
  Burgundy              42
  California           230
  Casablanca_Valley      2
  Marlborough           11
  New_York               4
  Oregon               258

Overall Statistics
                                          
               Accuracy : 0.5888          
                 95% CI : (0.5647, 0.6125)
    No Information Rate : 0.4728          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.3423          
                                          
 Mcnemar's Test P-Value : 9.85e-07        

Statistics by Class:

                     Class: Burgundy Class: California Class: Casablanca_Valley
Sensitivity                  0.47479            0.7699                 0.000000
Specificity                  0.93589            0.6440                 0.993928
Pos Pred Value               0.55122            0.6598                 0.000000
Neg Pred Value               0.91485            0.7573                 0.984366
Prevalence                   0.14226            0.4728                 0.015541
Detection Rate               0.06754            0.3640                 0.000000
Detection Prevalence         0.12253            0.5517                 0.005977
Balanced Accuracy            0.70534            0.7070                 0.496964
                     Class: Marlborough Class: New_York Class: Oregon
Sensitivity                    0.066667        0.076923        0.4717
Specificity                    0.983415        0.992107        0.7940
Pos Pred Value                 0.100000        0.133333        0.5265
Neg Pred Value                 0.974437        0.985525        0.7557
Prevalence                     0.026898        0.015541        0.3270
Detection Rate                 0.001793        0.001195        0.1542
Detection Prevalence           0.017932        0.008966        0.2929
Balanced Accuracy              0.525041        0.534515        0.6328</code></pre>
</div>
</div>
</section>
<section id="basic-model-with-parameter-tuning" class="slide level2">
<h2>Basic model with parameter tuning</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a>control <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"boot"</span>, <span class="at">number =</span> <span class="dv">1</span>)</span>
<span id="cb37-2"><a></a>fit <span class="ot">&lt;-</span> <span class="fu">train</span>(province <span class="sc">~</span> .,</span>
<span id="cb37-3"><a></a>             <span class="at">data =</span> train, </span>
<span id="cb37-4"><a></a>             <span class="at">method =</span> <span class="st">"knn"</span>,</span>
<span id="cb37-5"><a></a>             <span class="at">tuneLength =</span> <span class="dv">15</span>,</span>
<span id="cb37-6"><a></a>             <span class="at">trControl =</span> control)</span>
<span id="cb37-7"><a></a>fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>k-Nearest Neighbors 

6707 samples
  25 predictor
   6 classes: 'Burgundy', 'California', 'Casablanca_Valley', 'Marlborough', 'New_York', 'Oregon' 

No pre-processing
Resampling: Bootstrapped (1 reps) 
Summary of sample sizes: 6707 
Resampling results across tuning parameters:

  k   Accuracy   Kappa    
   5  0.5578427  0.3100153
   7  0.5759572  0.3301487
   9  0.5804858  0.3313401
  11  0.5821326  0.3308700
  13  0.5883079  0.3372149
  15  0.5953067  0.3462655
  17  0.5969535  0.3481324
  19  0.5977769  0.3465072
  21  0.5936599  0.3392167
  23  0.5977769  0.3437787
  25  0.5957184  0.3392827
  27  0.6010704  0.3472493
  29  0.5936599  0.3348038
  31  0.5994236  0.3436267
  33  0.5990119  0.3420449

Accuracy was used to select the optimal model using the largest value.
The final value used for the model was k = 27.</code></pre>
</div>
</div>
</section>
<section id="confusion-matrix-2" class="slide level2">
<h2>Confusion Matrix</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a></a><span class="fu">confusionMatrix</span>(<span class="fu">predict</span>(fit, test),<span class="fu">factor</span>(test<span class="sc">$</span>province))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

                   Reference
Prediction          Burgundy California Casablanca_Valley Marlborough New_York
  Burgundy               103         24                 0           6        0
  California              66        694                13          18       13
  Casablanca_Valley        0          0                 1           0        0
  Marlborough              0          0                 2           0        0
  New_York                 1          1                 0           1        2
  Oregon                  68         72                10          20       11
                   Reference
Prediction          Oregon
  Burgundy              37
  California           281
  Casablanca_Valley      0
  Marlborough            0
  New_York               2
  Oregon               227

Overall Statistics
                                          
               Accuracy : 0.6139          
                 95% CI : (0.5901, 0.6373)
    No Information Rate : 0.4728          
    P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
                                          
                  Kappa : 0.3554          
                                          
 Mcnemar's Test P-Value : NA              

Statistics by Class:

                     Class: Burgundy Class: California Class: Casablanca_Valley
Sensitivity                  0.43277            0.8774                0.0384615
Specificity                  0.95331            0.5567                1.0000000
Pos Pred Value               0.60588            0.6396                1.0000000
Neg Pred Value               0.91018            0.8350                0.9850478
Prevalence                   0.14226            0.4728                0.0155409
Detection Rate               0.06157            0.4148                0.0005977
Detection Prevalence         0.10161            0.6485                0.0005977
Balanced Accuracy            0.69304            0.7170                0.5192308
                     Class: Marlborough Class: New_York Class: Oregon
Sensitivity                    0.000000        0.076923        0.4150
Specificity                    0.998771        0.996964        0.8393
Pos Pred Value                 0.000000        0.285714        0.5564
Neg Pred Value                 0.973070        0.985594        0.7470
Prevalence                     0.026898        0.015541        0.3270
Detection Rate                 0.000000        0.001195        0.1357
Detection Prevalence           0.001195        0.004184        0.2439
Balanced Accuracy              0.499386        0.536944        0.6271</code></pre>
</div>
</div>
</section>
<section id="with-parameter-tuning-and-subsampling" class="slide level2">
<h2>With parameter tuning and subsampling</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a></a>fit <span class="ot">&lt;-</span> <span class="fu">train</span>(province <span class="sc">~</span> .,</span>
<span id="cb41-2"><a></a>             <span class="at">data =</span> train, </span>
<span id="cb41-3"><a></a>             <span class="at">method =</span> <span class="st">"knn"</span>,</span>
<span id="cb41-4"><a></a>             <span class="at">tuneLength =</span> <span class="dv">15</span>,</span>
<span id="cb41-5"><a></a>             <span class="at">metric =</span> <span class="st">"Kappa"</span>,</span>
<span id="cb41-6"><a></a>             <span class="at">trControl =</span> control)</span>
<span id="cb41-7"><a></a></span>
<span id="cb41-8"><a></a>fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>k-Nearest Neighbors 

6707 samples
  25 predictor
   6 classes: 'Burgundy', 'California', 'Casablanca_Valley', 'Marlborough', 'New_York', 'Oregon' 

No pre-processing
Resampling: Bootstrapped (1 reps) 
Summary of sample sizes: 6707 
Resampling results across tuning parameters:

  k   Accuracy   Kappa    
   5  0.5704341  0.3273476
   7  0.5851761  0.3470054
   9  0.5876331  0.3463441
  11  0.5859951  0.3415135
  13  0.5999181  0.3595324
  15  0.6036036  0.3622092
  17  0.6109746  0.3711568
  19  0.6003276  0.3514989
  21  0.6093366  0.3623349
  23  0.6085176  0.3606025
  25  0.6056511  0.3544650
  27  0.6138411  0.3641099
  29  0.6117936  0.3595468
  31  0.6122031  0.3594652
  33  0.6122031  0.3581913

Kappa was used to select the optimal model using the largest value.
The final value used for the model was k = 17.</code></pre>
</div>
</div>
</section>
<section id="tuning-plot" class="slide level2">
<h2>Tuning plot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a></a><span class="fu">ggplot</span>(fit, <span class="at">metric=</span><span class="st">"Kappa"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Session03_files/figure-revealjs/unnamed-chunk-26-1.png" width="960" class="r-stretch"></section>
<section id="group-modeling-problem-i" class="slide level2">
<h2>Group modeling problem I</h2>
<ul>
<li>Practice running different versions of the model</li>
<li>Create some new features and</li>
<li>see if you can achieve a Kappa &gt;= 0.5</li>
</ul>
</section>
<section id="bonus-knn-for-regression" class="slide level2">
<h2>Bonus: KNN for regression</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a>fit <span class="ot">&lt;-</span> <span class="fu">train</span>(price <span class="sc">~</span> .,</span>
<span id="cb44-2"><a></a>             <span class="at">data =</span> train, </span>
<span id="cb44-3"><a></a>             <span class="at">method =</span> <span class="st">"knn"</span>,</span>
<span id="cb44-4"><a></a>             <span class="at">tuneLength =</span> <span class="dv">15</span>,</span>
<span id="cb44-5"><a></a>             <span class="at">trControl =</span> control)</span>
<span id="cb44-6"><a></a>fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>k-Nearest Neighbors 

6707 samples
  25 predictor

No pre-processing
Resampling: Bootstrapped (1 reps) 
Summary of sample sizes: 6707 
Resampling results across tuning parameters:

  k   RMSE       Rsquared   MAE      
   5  0.7397803  0.4667813  0.5679558
   7  0.7361223  0.4690235  0.5685617
   9  0.7332577  0.4715985  0.5679969
  11  0.7312190  0.4740079  0.5655931
  13  0.7286175  0.4774743  0.5629271
  15  0.7255261  0.4822795  0.5606873
  17  0.7256343  0.4824432  0.5609475
  19  0.7269683  0.4815387  0.5616769
  21  0.7295000  0.4784287  0.5622216
  23  0.7278374  0.4819006  0.5611112
  25  0.7297833  0.4792947  0.5626595
  27  0.7301862  0.4804616  0.5632017
  29  0.7303998  0.4804668  0.5629553
  31  0.7300819  0.4814206  0.5628775
  33  0.7290362  0.4827843  0.5618911

RMSE was used to select the optimal model using the smallest value.
The final value used for the model was k = 15.</code></pre>
</div>
</div>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="../index.html">Home</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>